[gd_scene load_steps=13 format=3 uid="uid://wu3x1470tgl2"]

[ext_resource type="Material" uid="uid://dmey76ljh6vfj" path="res://Assets/wall.tres" id="1_nhkr4"]
[ext_resource type="Script" uid="uid://gwerv72s574d" path="res://Scenes/player.gd" id="3_qxria"]
[ext_resource type="PackedScene" uid="uid://bao78jw6vb7l6" path="res://Scenes/Props/Torch.tscn" id="4_7rqgy"]
[ext_resource type="MeshLibrary" uid="uid://6otfdd4j8uri" path="res://Scenes/Tiles/brickmesh.tres" id="4_qxria"]
[ext_resource type="PackedScene" uid="uid://battg45v8x0co" path="res://Scenes/Tiles/brick.tscn" id="5_y4jh7"]
[ext_resource type="BoxMesh" uid="uid://l312gfr2x720" path="res://Scenes/Tiles/ActualMesh.tres" id="6_y4jh7"]
[ext_resource type="Script" uid="uid://bkqnt2ch0wp25" path="res://Scenes/game_camera.gd" id="7_q68mp"]

[sub_resource type="Environment" id="Environment_nhkr4"]
background_mode = 1
background_color = Color(0.0666667, 0.0666667, 0.0666667, 1)
ambient_light_energy = 0.32
fog_enabled = true
fog_mode = 1
fog_light_energy = 0.66
fog_density = 0.0514

[sub_resource type="GDScript" id="GDScript_q68mp"]
script/source = "extends Node

@export var gridmap: GridMap  # Assign your GridMap in the Inspector

func _ready():
	if not gridmap:
		print(\"ERROR: GridMap not assigned!\")
		return

	print(\"MeshLibrary Path: \", gridmap.mesh_library.resource_path)
	print(\"Tile IDs: \", gridmap.mesh_library.get_item_list())

	for tile_id in gridmap.mesh_library.get_item_list():
		print(\"Tile \", tile_id, \" mesh: \", gridmap.mesh_library.get_item_mesh(tile_id))
"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f140w"]
albedo_color = Color(0, 1, 1, 1)

[sub_resource type="BoxMesh" id="BoxMesh_y4jh7"]
material = ExtResource("1_nhkr4")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4b75m"]
radius = 0.3
height = 0.655625

[node name="MainScene" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_nhkr4")

[node name="Torch" parent="." instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -1.97266, -6.10352e-05, -3.57349)

[node name="Torch" parent="Torch" instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -148.4, -6.10352e-05, -3.57349)

[node name="GridMap" type="GridMap" parent="." node_paths=PackedStringArray("gridmap")]
mesh_library = ExtResource("4_qxria")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(-65536, 65532, 1310720, -65536, 65533, 1310720, -1, 65534, 1310720, -2, 65534, 1310720, -1, 65533, 1310720, -1, 65532, 1310720, -2, 65533, 1310720, -2, 65532, 1310720, -3, 65532, 1310720, -4, 65532, 1310720, -5, 65532, 1310720, -5, 65533, 1310720, -5, 65534, 1310720, -5, 65535, 1310720, -6, 0, 1310720, -6, 1, 1310720, -5, 1, 1310720, -4, 1, 1310720, -4, 0, 1310720, -5, 0, 1310720, -4, 65535, 1310720, -6, 65535, 1310720, -6, 65534, 1310720, -6, 65533, 1310720, -6, 65532, 1310720, -4, 65533, 1310720, -3, 65533, 1310720, -3, 65534, 1310720, -4, 65534, 1310720, -3, 65535, 1310720, -2, 65535, 1310720, -1, 65535, 1310720, -65536, 65535, 1310720, -65536, 65534, 1310720, -65536, 0, 1310720, -65536, 1, 1310720, -65536, 2, 1310720, -1, 2, 1310720, -2, 2, 1310720, -2, 1, 1310720, -3, 1, 1310720, -2, 0, 1310720, -1, 0, 1310720, -1, 1, 1310720, -3, 2, 1310720, -3, 0, 1310720, -4, 2, 1310720, -5, 2, 1310720, -6, 2, 1310720, -7, 2, 1310720, -7, 1, 1310720, -7, 0, 1310720, -7, 65535, 1310720, -7, 65532, 1310720, -7, 65533, 1310720, -7, 65534, 1310720, 8, 10, 1310720, 1, 65532, 1310720, 1, 65533, 1310720, 1, 65534, 1310720, 1, 65535, 1310720, 1, 0, 1310720, 1, 1, 1310720, 1, 2, 1310720, 1, 3, 1310720, 0, 3, 1507328, 65535, 3, 1507328, 65534, 3, 1507328, 65533, 3, 1507328, 65532, 3, 1507328, 65531, 3, 1507328, 65530, 3, 1507328, 65529, 3, 1507328, 65528, 3, 1507328, 1, 65531, 1507328, 0, 65531, 1507328, 65535, 65531, 1507328, 65534, 65531, 1507328, 65533, 65531, 1507328, 65532, 65531, 1507328, 65531, 65531, 1507328, 65530, 65531, 1507328, 65529, 65531, 1507328, 65528, 65531, 1507328, 65528, 65532, 1507328, 65528, 2, 1507328, 65528, 65533, 1507328, 65528, 1, 1507328, 65528, 65534, 1507328, -8, 65535, 1507328, -8, 0, 1507328, -9, 65535, 1507328, -9, 0, 1507328, -10, 0, 917504, -10, 65535, 917504, -10, 65534, 917504, -10, 65533, 917504, -10, 65532, 917504, -10, 65531, 917504, -10, 65530, 917504, -10, 65529, 917504, -10, 65528, 917504, -9, 65527, 917504, -9, 65526, 917504, -9, 65525, 917504, -10, 65524, 917504, -11, 65524, 917504, -12, 65524, 917504, -13, 65524, 917504, -14, 65524, 917504, -15, 65524, 917504, -17, 65524, 917504, -18, 65524, 917504, -19, 65525, 1245184, -20, 65525, 1245184, -21, 65525, 917504, -22, 65525, 917504, -23, 65526, 1245184, -24, 65527, 1245184, -25, 65527, 1245184, -26, 65528, 917504, -27, 65528, 917504, -27, 65529, 1245184, -28, 65529, 917504, -29, 65530, 917504, -30, 65530, 917504, -31, 65531, 917504, -32, 65531, 917504, -32, 65532, 917504, -33, 65533, 917504, -34, 65533, 917504, -35, 65534, 917504, -36, 65535, 917504, -37, 65535, 917504, -38, 0, 917504, -39, 1, 917504, -39, 2, 917504, -40, 3, 917504, -40, 4, 917504, -40, 5, 917504, -40, 6, 917504, -39, 6, 917504, -39, 7, 917504, -39, 8, 917504, -39, 9, 917504, -38, 9, 917504, -38, 10, 917504, -37, 11, 917504, -37, 12, 917504, -36, 13, 917504, -36, 14, 917504, -35, 15, 917504, -34, 16, 917504, -34, 17, 917504, -33, 17, 917504, -33, 18, 917504, -32, 19, 917504, -31, 20, 917504, -30, 21, 917504, -30, 22, 917504, -29, 22, 917504, -28, 23, 917504, -26, 23, 917504, -25, 23, 917504, -24, 23, 917504, -23, 23, 917504, -22, 22, 917504, -21, 21, 917504, -20, 21, 917504, -19, 20, 917504, -19, 19, 917504, -18, 18, 917504, -17, 16, 917504, -16, 15, 917504, -16, 14, 917504, -15, 13, 917504, -15, 12, 917504, -14, 12, 917504, -14, 11, 917504, -14, 10, 917504, -13, 9, 917504, -13, 8, 917504, -12, 8, 917504, -12, 7, 917504, -12, 6, 917504, -12, 5, 917504, -11, 4, 917504, -11, 3, 917504, -11, 2, 917504, -11, 1, 917504, -10, 1, 917504, -21, 0, 1245184, -17, 65532, 1245184, -17, 65531, 1245184, -18, 65531, 917504, -18, 65530, 917504, -19, 65530, 1245184, -20, 65530, 1245184, -21, 65531, 917504, -21, 65532, 1245184, -22, 65532, 1245184, -22, 65533, 917504, -22, 65534, 1245184, -22, 65535, 917504, -22, 0, 917504, -22, 1, 917504, -21, 2, 1245184, -20, 3, 1245184, -20, 4, 1245184, -19, 4, 1245184, -18, 4, 1245184, -17, 4, 1245184, -17, 3, 1245184, -17, 2, 1245184, -17, 1, 1245184, -17, 0, 1245184, -19, 65534, 1245184, -16, 65524, 917504, -15, 65530, 1245184, -23, 8, 1245184, -17, 17, 917504, -27, 23, 917504, -23, 65535, 1245184, -24, 65535, 1245184, -24, 0, 1245184, -25, 0, 1245184, -27, 4, 1245184, -27, 3, 1245184, -26, 3, 1245184, -26, 2, 1245184, -25, 2, 1245184, -25, 1, 1245184, -14, 65528, 917504, -11, 65527, 917504, -12, 65527, 1245184, -13, 65527, 1245184, -14, 65527, 917504, -15, 65527, 1245184, -16, 65527, 917504, -17, 65527, 917504, -17, 65528, 1245184, -18, 65528, 917504, -19, 65528, 917504, -19, 65529, 917504, -20, 65529, 917504, -19, 65532, 1245184, -19, 65533, 1245184, -19, 65535, 1245184, -19, 1, 1245184, -20, 5, 1245184, -20, 6, 1245184, -19, 2, 1245184, -19, 0, 1245184, -18, 65534, 1245184, -18, 65533, 1245184, -18, 65532, 1245184, -18, 0, 1245184, -19, 3, 1245184, -18, 2, 1245184, -18, 65535, 1245184, -17, 65534, 1245184, -17, 65533, 1245184, -17, 65535, 1245184, -16, 65533, 1245184, -16, 65534, 1245184, -18, 1, 1245184, -15, 65533, 1245184, -15, 65534, 1245184, -15, 65535, 1245184, -15, 2, 1245184, -15, 3, 1245184, -15, 4, 1245184, -15, 1, 1245184, -15, 0, 1245184, -16, 1, 1245184, -16, 2, 1245184, -16, 3, 1245184, -16, 4, 1245184, -16, 0, 1245184, -16, 65535, 1245184, -14, 2, 1245184, -14, 1, 1245184, -13, 0, 1245184, -13, 2, 1245184, -13, 3, 1245184, -13, 1, 1245184, -12, 1, 1245184, -12, 2, 1245184, -12, 0, 1245184, -11, 65535, 1245184, -11, 0, 1245184, -11, 65534, 1245184, -11, 65533, 1245184, -11, 65532, 1245184, -11, 65531, 1245184, -11, 65530, 1245184, -11, 65529, 1245184, -11, 65528, 1245184, -12, 65534, 1245184, -12, 65533, 1245184, -12, 65532, 1245184, -12, 65531, 1245184, -12, 65530, 1245184, -12, 65529, 1245184, -13, 65534, 1245184, -13, 65535, 1245184, -13, 65532, 1245184, -13, 65531, 1245184, -13, 65530, 1245184, -13, 65529, 1245184, -13, 65528, 1245184, -12, 65528, 1245184, -13, 65533, 1245184, -12, 65535, 1245184, -14, 0, 1245184, -14, 65535, 1245184, -14, 65534, 1245184, -14, 65533, 1245184, -14, 65532, 1245184, -15, 65531, 1245184, -15, 65529, 1245184, -15, 65528, 1245184, -14, 65529, 1245184, -15, 65532, 1245184, -14, 65531, 1245184, -14, 65530, 1245184, -16, 65529, 1245184, -17, 65530, 1245184, -16, 65530, 1245184, -16, 65528, 1245184, -17, 65529, 1245184, -16, 65532, 1245184, -16, 65531, 1245184, -18, 65529, 1245184, -19, 65531, 1245184, -20, 65532, 1245184, -20, 65533, 1245184, -20, 65534, 1245184, -20, 65535, 1245184, -20, 0, 1245184, -20, 1, 1245184, -20, 65531, 1245184, -21, 65533, 1245184, -21, 65534, 1245184, -21, 65535, 1245184, -21, 1, 1245184, -21, 3, 1245184, -21, 4, 1245184, -21, 5, 1245184, -22, 5, 1245184, -22, 4, 1245184, -22, 3, 1245184, -22, 2, 1245184, -23, 0, 1245184, -23, 1, 1245184, -23, 2, 1245184, -23, 3, 1245184, -23, 4, 1245184, -23, 5, 1245184, -23, 6, 1245184, -23, 7, 1245184, -24, 8, 1245184, -24, 9, 1245184, -24, 2, 1245184, -24, 1, 1245184, -26, 1, 1245184, -26, 4, 1245184, -26, 5, 1245184, -25, 7, 1245184, -25, 8, 1245184, -25, 9, 1245184, -26, 9, 1245184, -26, 8, 1245184, -26, 7, 1245184, -26, 6, 1245184, -27, 5, 1245184, -27, 6, 1245184, -27, 7, 1245184, -27, 8, 1245184, -27, 9, 1245184, -27, 10, 1245184, -25, 3, 1245184, -25, 5, 1245184, -25, 6, 1245184, -24, 5, 1245184, -24, 4, 1245184, -24, 6, 1245184, -25, 4, 1245184, -24, 3, 1245184, -24, 7, 1245184, -22, 6, 1245184, -20, 2, 1245184, -21, 6, 1245184, -22, 7, 1245184, -22, 8, 1245184, -24, 10, 1245184, -23, 9, 1245184, -21, 7, 1245184, -19, 5, 1245184, -18, 3, 1245184, -21, 8, 1245184, -22, 9, 1245184, -23, 10, 1245184, -24, 11, 1245184, -20, 7, 1245184, -19, 6, 1245184, -18, 5, 1245184, -19, 7, 1245184, -20, 8, 1245184, -21, 9, 1245184, -22, 10, 1245184, -23, 11, 1245184, -20, 9, 1245184, -19, 8, 1245184, -18, 6, 1245184, -17, 5, 1245184, -17, 6, 1245184, -18, 7, 1245184, -21, 10, 1245184, -22, 11, 1245184, -21, 11, 1245184, -20, 10, 1245184, -19, 10, 1245184, -19, 9, 1245184, -18, 8, 1245184, -17, 7, 1245184, -16, 6, 1245184, -16, 5, 1245184, -15, 5, 1245184, -18, 9, 1245184, -17, 9, 1245184, -17, 8, 1245184, -16, 7, 1245184, -14, 3, 1245184, -14, 4, 1245184, -15, 6, 1245184, -16, 8, 1245184, -17, 10, 1245184, -15, 7, 1245184, -14, 6, 1245184, -14, 5, 1245184, -13, 4, 1245184, -12, 3, 1245184, -13, 5, 1245184, -12, 4, 1245184, -14, 7, 1245184, -15, 8, 1245184, -13, 6, 1245184, -13, 7, 1245184, -14, 8, 1245184, -15, 9, 1245184, -14, 9, 1245184, -16, 9, 1245184, -16, 10, 1245184, -15, 10, 1245184, -15, 11, 1245184, -16, 11, 1245184, -17, 11, 1245184, -18, 11, 1245184, -18, 10, 1245184, -18, 12, 1245184, -19, 12, 1245184, -20, 12, 1245184, -21, 12, 1245184, -23, 12, 1245184, -22, 12, 1245184, -23, 13, 1245184, -24, 13, 1245184, -25, 13, 1245184, -25, 12, 1245184, -26, 12, 1245184, -26, 11, 1245184, -26, 10, 1245184, -27, 11, 1245184, -27, 12, 1245184, -26, 13, 1245184, -24, 12, 1245184, -25, 11, 1245184, -25, 10, 1245184, -26, 14, 1245184, -27, 14, 1245184, -27, 15, 1245184, -27, 13, 1245184, -27, 16, 1245184, -27, 17, 1245184, -28, 18, 1245184, -28, 19, 1245184, -28, 20, 1245184, -27, 20, 1245184, -27, 21, 1245184, -27, 22, 1245184, -26, 22, 1245184, -26, 21, 1245184, -25, 21, 1245184, -25, 20, 1245184, -26, 20, 1245184, -26, 19, 1245184, -26, 18, 1245184, -27, 18, 1245184, -27, 19, 1245184, -25, 22, 1245184, -24, 22, 1245184, -23, 22, 1245184, -23, 21, 1245184, -22, 21, 1245184, -22, 20, 1245184, -22, 19, 1245184, -23, 19, 1245184, -24, 19, 1245184, -25, 19, 1245184, -25, 18, 1245184, -26, 17, 1245184, -26, 16, 1245184, -26, 15, 1245184, -24, 20, 1245184, -23, 20, 1245184, -23, 18, 1245184, -24, 18, 1245184, -24, 17, 1245184, -24, 16, 1245184, -24, 15, 1245184, -25, 14, 1245184, -25, 15, 1245184, -25, 16, 1245184, -25, 17, 1245184, -24, 21, 1245184, -24, 14, 1245184, -23, 16, 1245184, -23, 17, 1245184, -23, 15, 1245184, -23, 14, 1245184, -22, 15, 1245184, -22, 16, 1245184, -22, 17, 1245184, -22, 18, 1245184, -22, 14, 1245184, -22, 13, 1245184, -21, 15, 1245184, -21, 16, 1245184, -21, 17, 1245184, -21, 18, 1245184, -21, 19, 1245184, -21, 20, 1245184, -20, 20, 1245184, -20, 19, 1245184, -20, 18, 1245184, -20, 17, 1245184, -20, 16, 1245184, -20, 15, 1245184, -20, 14, 1245184, -20, 13, 1245184, -21, 13, 1245184, -21, 14, 1245184, -20, 11, 1245184, -19, 11, 1245184, -19, 13, 1245184, -19, 17, 1245184, -19, 16, 1245184, -19, 15, 1245184, -19, 14, 1245184, -19, 18, 1245184, -18, 16, 1245184, -18, 15, 1245184, -18, 14, 1245184, -18, 13, 1245184, -17, 12, 1245184, -16, 12, 1245184, -16, 13, 1245184, -17, 13, 1245184, -17, 14, 1245184, -17, 15, 1245184, -18, 17, 1245184, -27, 2, 1245184, -27, 1, 1245184, -27, 0, 1245184, -27, 65535, 1245184, -27, 65534, 1245184, -27, 65533, 1245184, -27, 65532, 1245184, -27, 65531, 1245184, -27, 65530, 1245184, -26, 65529, 1245184, -25, 65528, 1245184, -23, 65527, 1245184, -22, 65526, 1245184, -21, 65526, 1245184, -20, 65526, 1245184, -18, 65525, 1245184, -17, 65525, 1245184, -16, 65525, 1245184, -15, 65525, 1245184, -14, 65525, 1245184, -13, 65525, 1245184, -12, 65525, 1245184, -11, 65525, 1245184, -10, 65526, 1245184, -10, 65527, 1245184, -10, 65525, 1245184, -11, 65526, 1245184, -12, 65526, 1245184, -13, 65526, 1245184, -14, 65526, 1245184, -15, 65526, 1245184, -16, 65526, 1245184, -17, 65526, 1245184, -18, 65526, 1245184, -19, 65526, 1245184, -19, 65527, 1245184, -18, 65527, 1245184, -20, 65527, 1245184, -21, 65527, 1245184, -22, 65527, 1245184, -22, 65528, 1245184, -22, 65529, 1245184, -23, 65529, 1245184, -23, 65528, 1245184, -24, 65529, 1245184, -24, 65528, 1245184, -25, 65529, 1245184, -25, 65530, 1245184, -25, 65531, 1245184, -26, 65531, 1245184, -26, 65532, 1245184, -26, 65530, 1245184, -26, 65533, 1245184, -26, 65534, 1245184, -26, 65535, 1245184, -26, 0, 1245184, -25, 65533, 1245184, -25, 65532, 1245184, -25, 65534, 1245184, -25, 65535, 1245184, -24, 65532, 1245184, -24, 65531, 1245184, -24, 65534, 1245184, -24, 65533, 1245184, -23, 65530, 1245184, -23, 65531, 1245184, -23, 65532, 1245184, -23, 65533, 1245184, -24, 65530, 1245184, -22, 65531, 1245184, -22, 65530, 1245184, -23, 65534, 1245184, -21, 65530, 1245184, -21, 65529, 1245184, -21, 65528, 1245184, -20, 65528, 1245184)
}
script = SubResource("GDScript_q68mp")
gridmap = NodePath(".")
metadata/_editor_floor_ = Vector3(0, -1, 0)

[node name="Torch2" parent="." instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0.908105, 0.399713, 2.16014)

[node name="Torch2" parent="Torch2" instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -158.72, 1.6723, 2.16014)

[node name="Torch3" parent="." instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -4.91334, 0.511645, 2.91523)

[node name="Brick2" parent="." instance=ExtResource("5_y4jh7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.485596, -2.48291)
mesh = ExtResource("6_y4jh7")

[node name="Player" type="CharacterBody3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(0.707107, -0.45452, 0.541675, 0, 0.766044, 0.642788, -0.707107, -0.45452, 0.541675, 0, 0, 0)
script = ExtResource("3_qxria")
camera = NodePath("GameCamera")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 1.49012e-08, 0, 1.49012e-08, 0.4, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_f140w")
mesh = SubResource("BoxMesh_y4jh7")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_4b75m")

[node name="GameCamera" type="Camera3D" parent="Player" node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 0, 1, 0, 0, 10)
projection = 1
size = 10.0
script = ExtResource("7_q68mp")
target = NodePath("..")
dead_zone_size = Vector2(148, 150)

[node name="Torch4" parent="." instance=ExtResource("4_7rqgy")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0.908105, 0.399713, 2.16014)
